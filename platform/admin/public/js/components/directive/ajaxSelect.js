(function(){"use strict";Vue.component("i-ajax-select",Janfish.extend({props:["model","attribute","conditions","value","filterable","multiple","remote-filterable","placeholder","clearable","label","disabled","url","size"],data:function(){return{options:[],loading:false}},render:function(a){var b,c=[],d=this,e,f=this.url===undefined;for(b in this.options){c.push(a("Option",{props:{value:this.options[b].id,key:this.options[b].id,label:this.options[b].name}},this.options[b].name))}d.url=this.url===undefined?"/resource/selector":d.url;d.filterable=this.filterable===undefined?false:this.filterable;d.disabled=this.disabled===undefined?false:this.disabled;d.multiple=this.multiple===undefined?false:this.multiple;d.clearable=this.clearable===undefined?false:this.clearable;d.remoteFilterable=this.remoteFilterable===undefined?false:this.remoteFilterable;e={clearable:d.clearable,disabled:d.disabled,placeholder:d.placeholder?d.placeholder:"请选择",filterable:d.remoteFilterable===true?d.remoteFilterable:d.filterable,multiple:d.multiple,size:d.size,remote:d.remoteFilterable,loading:d.remoteFilterable===true?d.loading:null,"remote-method":d.remoteLoad,value:typeof this.value!=="object"?this.value!==undefined?this.value.toString():"":this.value};if(d.remoteFilterable===true){e.label=d.label}return a("Select",{on:{"on-change":function(a){d.$emit("input",a)}},props:e},c)},methods:{remoteLoad:function(a){var b=this,c=this.model||"",d=this.attribute||"",e=this.conditions||{time:+new Date};if(b.checkModel===true){if(!c||!d){b.$Message.error("参数错误");return false}}if(a&&typeof a=="string"){e[d]=a}e=e?JSON.stringify(e):"";b.loading=true;b.options=[];b.$http.post(b.url,qs.stringify({model:c,attribute:d,conditions:e})).then(function(a){b.loading=false;if(a.status!=="success"){b.$Message.error(a.message);return false}b.options=a.data.data})}},mounted:function(){this.remoteLoad()}}))})();